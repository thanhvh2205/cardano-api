<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head id="head" data-base-url=".."><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cardano.Api.ChainSync.ClientPipelined</title><link href="../linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="../quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="../haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cardano-api</span><ul class="links" id="page-menu"><li><a href="src/Cardano.Api.ChainSync.ClientPipelined.html">Source</a></li><li><a href="../index.html">Contents</a></li><li><a href="../doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cardano.Api.ChainSync.ClientPipelined</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Pipelined protocol type for the client</a></li><li><a href="#g:2">Implementation Helpers</a></li><li><a href="#g:3">Type level natural numbers</a></li><li><a href="#g:4">Utilities</a></li></ul></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">newtype</span> <a href="#t:ChainSyncClientPipelined">ChainSyncClientPipelined</a> header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a = <a href="#v:ChainSyncClientPipelined">ChainSyncClientPipelined</a> {<ul class="subs"><li><a href="#v:runChainSyncClientPipelined">runChainSyncClientPipelined</a> :: m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ClientPipelinedStIdle">ClientPipelinedStIdle</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <span class="keyword">where</span><ul class="subs"><li><a href="#v:SendMsgRequestNext">SendMsgRequestNext</a> :: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) header point tip a. m () -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientStNext" title="Cardano.Api.ChainSync.ClientPipelined">ClientStNext</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</li><li><a href="#v:SendMsgRequestNextPipelined">SendMsgRequestNextPipelined</a> :: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip a. m () -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n) header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a</li><li><a href="#v:SendMsgFindIntersect">SendMsgFindIntersect</a> :: <span class="keyword">forall</span> point header tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. [point] -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIntersect" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIntersect</a> header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</li><li><a href="#v:CollectResponse">CollectResponse</a> :: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip a. <a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1) header point tip m a)) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientStNext" title="Cardano.Api.ChainSync.ClientPipelined">ClientStNext</a> n1 header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1) header point tip m a</li><li><a href="#v:SendMsgDone">SendMsgDone</a> :: <span class="keyword">forall</span> a header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ClientStNext">ClientStNext</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a = <a href="#v:ClientStNext">ClientStNext</a> {<ul class="subs"><li><a href="#v:recvMsgRollForward">recvMsgRollForward</a> :: header -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a)</li><li><a href="#v:recvMsgRollBackward">recvMsgRollBackward</a> :: point -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ClientPipelinedStIntersect">ClientPipelinedStIntersect</a> header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a = <a href="#v:ClientPipelinedStIntersect">ClientPipelinedStIntersect</a> {<ul class="subs"><li><a href="#v:recvMsgIntersectFound">recvMsgIntersectFound</a> :: point -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</li><li><a href="#v:recvMsgIntersectNotFound">recvMsgIntersectNotFound</a> :: tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ChainSyncInstruction">ChainSyncInstruction</a> header point tip<ul class="subs"><li>= <a href="#v:RollForward">RollForward</a> !header !tip</li><li>| <a href="#v:RollBackward">RollBackward</a> !point !tip</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:PipelineDecision">PipelineDecision</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) <span class="keyword">where</span><ul class="subs"><li><a href="#v:Request">Request</a> :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a></li><li><a href="#v:Pipeline">Pipeline</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n</li><li><a href="#v:CollectOrPipeline">CollectOrPipeline</a> :: <span class="keyword">forall</span> (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1)</li><li><a href="#v:Collect">Collect</a> :: <span class="keyword">forall</span> (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1)</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:MkPipelineDecision">MkPipelineDecision</a> <span class="keyword">where</span><ul class="subs"><li><a href="#v:MkPipelineDecision">MkPipelineDecision</a> :: (<span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n, <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a>)) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a></li></ul></li><li class="src short"><a href="#v:runPipelineDecision">runPipelineDecision</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n, <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a>)</li><li class="src short"><a href="#v:constantPipelineDecision">constantPipelineDecision</a> :: (<span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a></li><li class="src short"><a href="#v:pipelineDecisionMax">pipelineDecisionMax</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n</li><li class="src short"><a href="#v:pipelineDecisionMin">pipelineDecisionMin</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n</li><li class="src short"><a href="#v:pipelineDecisionLowHighMark">pipelineDecisionLowHighMark</a> :: <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:N">N</a><ul class="subs"><li>= <a href="#v:Z">Z</a></li><li>| <a href="#v:S">S</a> <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Nat">Nat</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) <span class="keyword">where</span><ul class="subs"><li><span class="keyword">pattern</span> <a href="#v:Zero">Zero</a> :: () =&gt; '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> <a href="../base/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> n =&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n</li><li><span class="keyword">pattern</span> <a href="#v:Succ">Succ</a> :: <span class="keyword">forall</span> m n. () =&gt; m <a href="../base/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n =&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> m</li></ul></li><li class="src short"><a href="#v:natToInt">natToInt</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a></li><li class="src short"><a href="#v:mapChainSyncClientPipelined">mapChainSyncClientPipelined</a> :: <span class="keyword">forall</span> header header' point point' tip tip' (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; (point -&gt; point') -&gt; (point' -&gt; point) -&gt; (header' -&gt; header) -&gt; (tip' -&gt; tip) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> header' point' tip' m a</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Pipelined protocol type for the client</h1></a><div class="doc"><p>The protocol states from the point of view of the client.</p></div><div class="top"><p class="src"><span class="keyword">newtype</span> <a id="t:ChainSyncClientPipelined" class="def">ChainSyncClientPipelined</a> header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:ChainSyncClientPipelined" class="selflink">#</a></p><div class="doc"><p>Pipelined chain sync client.  It can only pipeline <code>MsgRequestNext</code>
 messages, while the <code>MsgFindIntersect</code> are non pipelined.  This has a penalty
 cost of an RTT, but they are sent relatively seldom and their response might
 impact how many messages one would like to pipeline.  It also simplifies the
 receiver callback.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ChainSyncClientPipelined" class="def">ChainSyncClientPipelined</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:runChainSyncClientPipelined" class="def">runChainSyncClientPipelined</a> :: m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClientPipelinedStIdle" class="def">ClientPipelinedStIdle</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <span class="keyword">where</span> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:ClientPipelinedStIdle" class="selflink">#</a></p><div class="doc"><p>Pipelined sender which starts in <code><a href="../ouroboros-network-protocols/Ouroboros-Network-Protocol-ChainSync-Type.html#v:StIdle" title="Ouroboros.Network.Protocol.ChainSync.Type">StIdle</a></code> state.  It can either</p><ul><li>Send <code>MsgRequestNext</code> (no pipelining), which might be useful when we are at
   the tip of the chain.  It can only be send when there is no pipelined
   message in flight (all responses were collected);</li><li>Pipeline <code>MsgRequestNext</code>;</li><li>Send <code>MsgFindIntersect</code> (no pipelining); It can only be send when there is
   no pipelined message in flight (all responses were collected);</li><li>Collect responses of pipelined message;</li><li>Terminate the protocol with by sending <code>MsgDone</code>.</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:SendMsgRequestNext" class="def">SendMsgRequestNext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) header point tip a. m ()</dfn><div class="doc"><p>promptly invoked when <code>MsgAwaitReply</code> is received</p></div></li><li><dfn class="src">-&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientStNext" title="Cardano.Api.ChainSync.ClientPipelined">ClientStNext</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src">-&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:SendMsgRequestNextPipelined" class="def">SendMsgRequestNextPipelined</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src">:: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip a. m ()</dfn><div class="doc"><p>promptly invoked when <code>MsgAwaitReply</code> is received</p></div></li><li><dfn class="src">-&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n) header point tip m a</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src">-&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr><tr><td class="src"><a id="v:SendMsgFindIntersect" class="def">SendMsgFindIntersect</a> :: <span class="keyword">forall</span> point header tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. [point] -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIntersect" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIntersect</a> header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CollectResponse" class="def">CollectResponse</a> :: <span class="keyword">forall</span> (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip a. <a href="../base/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> (m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1) header point tip m a)) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientStNext" title="Cardano.Api.ChainSync.ClientPipelined">ClientStNext</a> n1 header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1) header point tip m a</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SendMsgDone" class="def">SendMsgDone</a> :: <span class="keyword">forall</span> a header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>). a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClientStNext" class="def">ClientStNext</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:ClientStNext" class="selflink">#</a></p><div class="doc"><p>Callback for responses received after sending <code>MsgRequestNext</code>.</p><p>We could receive <code>MsgAwaitReply</code>. In this case we will wait for the next
 message which must be <code>MsgRollForward</code> or <code>MsgRollBackward</code>; thus we need
 only the two callbacks.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClientStNext" class="def">ClientStNext</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:recvMsgRollForward" class="def">recvMsgRollForward</a> :: header -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a)</dfn><div class="doc"><p>Callback for <code>MsgRollForward</code> message.</p></div></li><li><dfn class="src"><a id="v:recvMsgRollBackward" class="def">recvMsgRollBackward</a> :: point -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> n header point tip m a)</dfn><div class="doc"><p>Callback for <code>MsgRollBackward</code> message.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ClientPipelinedStIntersect" class="def">ClientPipelinedStIntersect</a> header point tip (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:ClientPipelinedStIntersect" class="selflink">#</a></p><div class="doc"><p>Callbacks for messages received after sending <code>MsgFindIntersect</code>.</p><p>We might receive either <code>MsgIntersectFound</code> or <code>MsgIntersectNotFound</code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ClientPipelinedStIntersect" class="def">ClientPipelinedStIntersect</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:recvMsgIntersectFound" class="def">recvMsgIntersectFound</a> :: point -&gt; tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:recvMsgIntersectNotFound" class="def">recvMsgIntersectNotFound</a> :: tip -&gt; m (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ClientPipelinedStIdle" title="Cardano.Api.ChainSync.ClientPipelined">ClientPipelinedStIdle</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> header point tip m a)</dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ChainSyncInstruction" class="def">ChainSyncInstruction</a> header point tip <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:ChainSyncInstruction" class="selflink">#</a></p><div class="doc"><p>Data received through pipelining: either roll forward or roll backward
 instruction. If the server replied with <code>MsgAwaitReply</code> the pipelined
 receiver will await for the next message which must come with an instruction
 how to update our chain.</p><p>Note: internal API, not exposed by this module.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RollForward" class="def">RollForward</a> !header !tip</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:RollBackward" class="def">RollBackward</a> !point !tip</td><td class="doc empty">&nbsp;</td></tr></table></div></div><a href="#g:2" id="g:2"><h1>Implementation Helpers</h1></a><div class="doc"><p>It's generally idiomatic to use these functions to implement your
 pipelined client. It aids in deciding when to make pipelined requests
 vs process received responses.</p></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PipelineDecision" class="def">PipelineDecision</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) <span class="keyword">where</span> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:PipelineDecision" class="selflink">#</a></p><div class="doc"><p>Pipeline decision: we can do either one of these:</p><ul><li>non-pipelined request</li><li>pipeline a request</li><li>collect or pipeline, but only when there are pipelined requests</li><li>collect, as above, only when there are pipelined requests</li></ul><p>There might be other useful pipelining scenarios: collect a given number of
 requests (which also can be used to collect all outstanding requests).</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Request" class="def">Request</a> :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Pipeline" class="def">Pipeline</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:CollectOrPipeline" class="def">CollectOrPipeline</a> :: <span class="keyword">forall</span> (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Collect" class="def">Collect</a> :: <span class="keyword">forall</span> (n1 :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> ('<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n1)</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MkPipelineDecision" class="def">MkPipelineDecision</a> <span class="keyword">where</span> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#t:MkPipelineDecision" class="selflink">#</a></p><div class="doc"><p>The callback gets the following arguments:</p><ul><li>how many requests are not yet collected (in flight or
   already queued)</li><li>block number of client's tip</li><li>block number of server's tip</li></ul><p>Client's tip block number and server's tip block number can only be equal
 (from the client's perspective) when both the client's and the server's tip
 headers agree. If they would not agree (server forked), then the server
 sends <code>MsgRollBackward</code>, which rolls back one block and causes the client's
 tip and the server's tip to differ.</p><p>In this module we implement three pipelining strategies:</p><ul><li><code><a href="Cardano-Api-ChainSync-ClientPipelined.html#v:pipelineDecisionMax" title="Cardano.Api.ChainSync.ClientPipelined">pipelineDecisionMax</a></code></li><li><code><a href="Cardano-Api-ChainSync-ClientPipelined.html#v:pipelineDecisionMin" title="Cardano.Api.ChainSync.ClientPipelined">pipelineDecisionMin</a></code></li><li><code><a href="Cardano-Api-ChainSync-ClientPipelined.html#v:pipelineDecisionLowHighMark" title="Cardano.Api.ChainSync.ClientPipelined">pipelineDecisionLowHighMark</a></code></li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:MkPipelineDecision" class="def">MkPipelineDecision</a> :: (<span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n, <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a>)) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:runPipelineDecision" class="def">runPipelineDecision</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n, <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a>) <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:runPipelineDecision" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:constantPipelineDecision" class="def">constantPipelineDecision</a> :: (<span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:constantPipelineDecision" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:pipelineDecisionMax" class="def">pipelineDecisionMax</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:pipelineDecisionMax" class="selflink">#</a></p><div class="doc"><p>Present maximal pipelining of at most <code>omax</code> requests.  Collect responses
 either when we are at the same block number as the server or when we sent
 more than <code>omax</code> requests.</p><p>If <code>omax = 3</code> this pipelining strategy will generate a sequence:
 <code>
    Pipeline
    Pipeline
    Pipeline
    Collect
    Pipeline
    Collect
    ....
    Pipeline
    Collect
    Collect
    Collect
 </code></p></div></div><div class="top"><p class="src"><a id="v:pipelineDecisionMin" class="def">pipelineDecisionMin</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="../cardano-ledger-core/Cardano-Ledger-BaseTypes.html#t:WithOrigin" title="Cardano.Ledger.BaseTypes">WithOrigin</a> <a href="Cardano-Api.html#t:BlockNo" title="Cardano.Api">BlockNo</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:PipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">PipelineDecision</a> n <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:pipelineDecisionMin" class="selflink">#</a></p><div class="doc"><p>Present minimum pipelining of at most <code>omax</code> requests, collect responses
 eagerly.</p></div></div><div class="top"><p class="src"><a id="v:pipelineDecisionLowHighMark" class="def">pipelineDecisionLowHighMark</a> :: <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="../base/Data-Word.html#t:Word16" title="Data.Word">Word16</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:MkPipelineDecision" title="Cardano.Api.ChainSync.ClientPipelined">MkPipelineDecision</a> <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:pipelineDecisionLowHighMark" class="selflink">#</a></p><div class="doc"><p>Pipelining strategy which pipelines up to <code>highMark</code> requests; if the
 number of pipelined messages exceeds the high mark, it collects messages
 until there are at most <code>lowMark</code> outstanding requests.</p></div></div><a href="#g:3" id="g:3"><h1>Type level natural numbers</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:N" class="def">N</a> <a href="#t:N" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Z" class="def">Z</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:S" class="def">S</a> <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Nat" class="def">Nat</a> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>) <span class="keyword">where</span> <a href="#t:Nat" class="selflink">#</a></p><div class="subs bundled-patterns"><p class="caption">Bundled Patterns</p><table><tr><td class="src"><span class="keyword">pattern</span> <a id="v:Zero" class="def">Zero</a> :: () =&gt; '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:Z" title="Cardano.Api.ChainSync.ClientPipelined">Z</a> <a href="../base/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> n =&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><span class="keyword">pattern</span> <a id="v:Succ" class="def">Succ</a> :: <span class="keyword">forall</span> m n. () =&gt; m <a href="../base/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> '<a href="Cardano-Api-ChainSync-ClientPipelined.html#v:S" title="Cardano.Api.ChainSync.ClientPipelined">S</a> n =&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> m</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Nat">Instances</h4><details id="i:Nat" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Nat:Show:1"></span> <a href="../base/Text-Show.html#t:Show" title="Text.Show">Show</a> (<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Nat:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Network-TypedProtocol-Pipelined.html">Network.TypedProtocol.Pipelined</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src" class="link">Source</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../base/Data-String.html#t:String" title="Data.String">String</a> <a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src" class="link">Source</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n] -&gt; <a href="../base/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="file:///nix/store/fky69z1cbalcvmp04la05zsdsgkb65g9-ghc-9.8.2-doc/share/doc/ghc-9.8.2/html/libraries/base-4.19.1.0-inplace/src" class="link">Source</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:natToInt" class="def">natToInt</a> :: <span class="keyword">forall</span> (n :: <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:N" title="Cardano.Api.ChainSync.ClientPipelined">N</a>). <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:Nat" title="Cardano.Api.ChainSync.ClientPipelined">Nat</a> n -&gt; <a href="../base/Data-Int.html#t:Int" title="Data.Int">Int</a> <a href="#v:natToInt" class="selflink">#</a></p></div><a href="#g:4" id="g:4"><h1>Utilities</h1></a><div class="top"><p class="src"><a id="v:mapChainSyncClientPipelined" class="def">mapChainSyncClientPipelined</a> :: <span class="keyword">forall</span> header header' point point' tip tip' (m :: <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a> -&gt; <a href="../base/Data-Kind.html#t:Type" title="Data.Kind">Type</a>) a. <a href="../base/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> m =&gt; (point -&gt; point') -&gt; (point' -&gt; point) -&gt; (header' -&gt; header) -&gt; (tip' -&gt; tip) -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> header point tip m a -&gt; <a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a> header' point' tip' m a <a href="file:///home/runner/.local/state/cabal/store/ghc-9.8.2-inplace/ouroboros-network-protocols-0.9.0.0-9a3f02f8f9fe7641ff83ea7083a1a74b599fe6405e4138b0317d48b6711740c5/share/doc/html/src" class="link">Source</a> <a href="#v:mapChainSyncClientPipelined" class="selflink">#</a></p><div class="doc"><p>Transform a <code><a href="Cardano-Api-ChainSync-ClientPipelined.html#t:ChainSyncClientPipelined" title="Cardano.Api.ChainSync.ClientPipelined">ChainSyncClientPipelined</a></code> by mapping over the tx header and
 the chain tip values.</p><p>Note the direction of the individual mapping functions corresponds to
 whether the types are used as protocol inputs or outputs (or both, as is
 the case for points).</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.30.0</p></div></body></html>